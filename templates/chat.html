{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hudson AI Assistant</title>
<link rel="icon" href="{% static 'img3.png' %}">
<link rel="stylesheet" href="{% static 'css/style.css' %}?v=2">
</head>

<body>

<section class="chat-section">
    <div class="chat-container">

        <h2 class="heading">AI <span style="color: var(--main-color);">Assistant</span></h2>

        <div class="chat-box">
            <div class="message bot">
                <strong>AI: </strong> Hello. I'm Hudson's AI assistant. Ask me about his skills or projects.
            </div>

            <div class="message user">
                <strong>You: </strong> What are Hudson's core skills?
            </div>

            <div class="message bot">
                <strong>AI: </strong> Hudson specializes in Python development, API integration, and full-stack project implementation.
            </div>
        </div>

        <div class="chat-input-area">
            <input type="text" placeholder="Ask about Hudson..." />
            <button class="btn">Send Message</button>
        </div>

    </div>
</section>
<script>
    document.addEventListener("DOMContentLoaded", function () {
    
        const input = document.querySelector(".chat-input-area input");
        const chatBox = document.querySelector(".chat-box");
        const sendBtn = document.querySelector(".btn");
    
        function addMessage(text, type) {
            const msg = document.createElement("div");
            msg.classList.add("message", type);
            msg.innerHTML = `<strong>${type === "user" ? "You" : "Assistant"}:</strong> ${text}`;
            chatBox.appendChild(msg);
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    
        async function sendMessage() {
            const text = input.value.trim();
            if (!text) return;
    
            addMessage(text, "user");
            input.value = "";
    
            try {
                const response = await fetch("api/chat/", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ message: text })
                });
    
                const data = await response.json();
    
                addMessage(data.reply, "bot");
    
            } catch (error) {
                addMessage("Error connecting to server.", "bot");
            }
        }
    
        sendBtn.addEventListener("click", sendMessage);
    
        input.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                e.preventDefault();
                sendMessage();
            }
        });
    
    });
    </script>
</body>
</html>