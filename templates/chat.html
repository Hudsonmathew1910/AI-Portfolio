{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hudson AI Assistant</title>
<link rel="icon" href="{% static 'img3.png' %}">

<style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@100..900&display=swap');

:root {
  --bg-color: #080808;
  --second-bg-color: #101010;
  --text-color: white;
  --main-color: #798645;
  --trd-bg-color: #F2EED7;
}

*{
    margin: 1;
    padding: 0;
    box-sizing: border-box;
    font-family: "Montserrat", sans-serif;
}

body{
    background: linear-gradient(145deg, #080808, #0f0f0f);
    color: var(--text-color);
    margin: 10px;
    padding-top: 10px;
}

/* SECTION */
.chat-section{
    min-height: 100vh;
    padding: 2rem 8%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding-top: 1px;
}

/* CHAT CONTAINER */
.chat-container{
    width: 100%;
    max-width: 900px;
}

/* HEADING */
.heading{
    text-align: center;
    font-size: 3rem;
    margin-bottom: 2rem;
    color: var(--trd-bg-color);
    letter-spacing: 1px;
}

/* CHAT BOX */
.chat-box{
    height: 500px;
    overflow-y: auto;
    padding: 2rem;
    font-size: 1rem;
    background: rgba(16, 16, 16, 0.9);
    backdrop-filter: blur(8px);
    border-radius: 1.5rem 0rem 0 0;
    border: 1px solid var(--main-color);
    box-shadow: 0 0 25px rgba(121, 134, 69, 0.2);
}

/* MESSAGES */
.message{
    margin-bottom: 1.5rem;
    padding: 1rem 1.2rem;
    max-width: 75%;
    border-radius: 1.2rem;
    line-height: 1.6;
    animation: fadeIn 0.3s ease-in-out;
}

.message.user{
    background: var(--main-color);
    color: var(--bg-color);
    margin-left: auto;
    text-align: right;
    border-bottom-right-radius: 0;
}

.message.bot{
    background: #1a1a1a;
    color: var(--trd-bg-color);
    border-bottom-left-radius: 0;
}

/* INPUT AREA */
.chat-input-area{
    display: flex;
}

.chat-input-area input{
    flex: 1;
    padding: 18px;
    font-size: 1rem;
    color: var(--text-color);
    background-color: var(--second-bg-color);
    border-radius: 0 0 0 1.5rem;
    border: 1px solid var(--main-color);
    outline: none;
}

.chat-input-area input:focus{
    box-shadow: 0 0 10px var(--main-color);
}

/* BUTTON */
.btn{
    padding: 0 2.5rem;
    border-radius: 0 0 1.5rem 0;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    border: none;
    background: linear-gradient(
        270deg,
        var(--trd-bg-color) 10%,
        var(--main-color) 100%
    );
    color: var(--bg-color);
    transition: 0.3s ease-in-out;
}

.btn:hover{
    transform: scale(1.05);
    box-shadow: 0 0 15px var(--trd-bg-color);
}

/* Scrollbar */
.chat-box::-webkit-scrollbar{
    width: 6px;
}
.chat-box::-webkit-scrollbar-thumb{
    background-color: var(--main-color);
    border-radius: 10px;
}

/* Animation */
@keyframes fadeIn{
    from{
        opacity: 0;
        transform: translateY(10px);
    }
    to{
        opacity: 1;
        transform: translateY(0);
    }
}
</style>
</head>

<body>

<section class="chat-section">
    <div class="chat-container">

        <h2 class="heading">AI <span style="color: var(--main-color);">Assistant</span></h2>

        <div class="chat-box">
            <div class="message bot">
                <strong>Assistant:</strong> Hello. I'm Hudson's AI portfolio assistant. Ask me about his skills or projects.
            </div>

            <div class="message user">
                <strong>You:</strong> What are Hudson's core skills?
            </div>

            <div class="message bot">
                <strong>Assistant:</strong> Hudson specializes in Python development, API integration, and full-stack project implementation.
            </div>
        </div>

        <div class="chat-input-area">
            <input type="text" placeholder="Ask about Hudson..." />
            <button class="btn">Send Message</button>
        </div>

    </div>
</section>
<script>
    document.addEventListener("DOMContentLoaded", function () {
    
        const input = document.querySelector(".chat-input-area input");
        const chatBox = document.querySelector(".chat-box");
        const sendBtn = document.querySelector(".btn");
    
        function addMessage(text, type) {
            const msg = document.createElement("div");
            msg.classList.add("message", type);
            msg.innerHTML = `<strong>${type === "user" ? "You" : "Assistant"}:</strong> ${text}`;
            chatBox.appendChild(msg);
            chatBox.scrollTop = chatBox.scrollHeight;
        }
    
        async function sendMessage() {
            const text = input.value.trim();
            if (!text) return;
    
            addMessage(text, "user");
            input.value = "";
    
            try {
                const response = await fetch("api/chat/", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ message: text })
                });
    
                const data = await response.json();
    
                addMessage(data.reply, "bot");
    
            } catch (error) {
                addMessage("Error connecting to server.", "bot");
            }
        }
    
        sendBtn.addEventListener("click", sendMessage);
    
        input.addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                e.preventDefault();
                sendMessage();
            }
        });
    
    });
    </script>
</body>
</html>